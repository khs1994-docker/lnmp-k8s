(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{415:function(v,t,_){"use strict";_.r(t);var e=_(42),a=Object(e.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"kubernetes-数据问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-数据问题"}},[v._v("#")]),v._v(" Kubernetes 数据问题")]),v._v(" "),_("h2",{attrs:{id:"配置、密钥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配置、密钥"}},[v._v("#")]),v._v(" 配置、密钥")]),v._v(" "),_("p",[v._v("这些变动不太频繁的，建议生成 "),_("code",[v._v("configMap")]),v._v(" 和 "),_("code",[v._v("secret")]),v._v(" 进行挂载。")]),v._v(" "),_("h2",{attrs:{id:"数据库、缓存-数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据库、缓存-数据"}},[v._v("#")]),v._v(" 数据库、缓存 数据")]),v._v(" "),_("p",[v._v("存放到 "),_("code",[v._v("pvc")]),v._v(" 中，只要不删除 "),_("code",[v._v("pv")]),v._v(" "),_("code",[v._v("pvc")]),v._v(", 数据就不会丢失。")]),v._v(" "),_("h2",{attrs:{id:"项目数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#项目数据"}},[v._v("#")]),v._v(" 项目数据")]),v._v(" "),_("p",[v._v("例如 PHP 源代码")]),v._v(" "),_("h3",{attrs:{id:"开发环境"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[v._v("#")]),v._v(" 开发环境")]),v._v(" "),_("p",[v._v("开发环境，源码变动频繁，最好是将本地目录挂载进容器中。")]),v._v(" "),_("p",[v._v("假设开发环境使用的是 Docker 桌面版，这两个比较特殊，实现原理实际上是运行了一个 Linux 虚拟机，所以虚拟机的路径不等于宿主机的路径，但有一个对应关系（实际对应关系我已经通过脚本解析，有兴趣的可以查看本项目 CLI 源码）。")]),v._v(" "),_("p",[v._v("本项目的解决方案同上边，使用 "),_("code",[v._v("hostPath")]),v._v(" 类型的 "),_("code",[v._v("pv")]),v._v(" 和 "),_("code",[v._v("pvc")])]),v._v(" "),_("p",[v._v("我们只要在家目录 "),_("code",[v._v("~/app/*")]),v._v(" 中开发就可以了（还是两步走，新建 PHP 项目目录、NGINX 配置文件）。")]),v._v(" "),_("h3",{attrs:{id:"生产环境"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[v._v("#")]),v._v(" 生产环境")]),v._v(" "),_("p",[v._v("具有 "),_("strong",[v._v("多节点")]),v._v(" "),_("strong",[v._v("跨节点")]),v._v(" 的特性，可以选用以下几种方法")]),v._v(" "),_("p",[_("strong",[v._v("1.")]),v._v(" 打入镜像，交付容器")]),v._v(" "),_("p",[_("strong",[v._v("2.")]),v._v(" 挂载可以跨节点的数据卷 (NFS)")]),v._v(" "),_("p",[_("strong",[v._v("3.")]),v._v(" 使用 "),_("code",[v._v("Daemonset")]),v._v("("),_("code",[v._v("git-sync")]),v._v(") 保证每个节点都有代码，通过 "),_("code",[v._v("hostpath")]),v._v(" 挂载")])])}),[],!1,null,null,null);t.default=a.exports}}]);